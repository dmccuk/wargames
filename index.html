<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6SGEYLDYP2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-6SGEYLDYP2');
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0a0a0a" />
  <title>WARGAMES - WOPR SYSTEM</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="scanlines"></div>

  <!-- TITLE SCREEN -->
  <div id="title-screen" class="screen active">
    <canvas id="title-globe-canvas"></canvas>
    <div class="title-content">
      <div class="title-logo">WARGAMES</div>
      <div class="subtitle">A STRANGE GAME</div>
      <button class="start-button" onclick="window.startGame()">START GAME</button>
    </div>
  </div>

  <!-- LEVEL 1: THE BACKDOOR -->
  <div id="level1-screen" class="screen">
    <div class="game-container">
      <div class="game-header">
        <div class="level-title">LEVEL 1: THE BACKDOOR</div>
        <div class="score-display">
          <div>SCORE: <span id="score">0</span></div>
          <div>TIME: <span id="timer">00:00</span></div>
        </div>
      </div>
      <div class="game-content">
        <div class="terminal-text">PROTOVISION GAME SYSTEM v3.4</div>
        <div class="terminal-text">UNAUTHORIZED ACCESS DETECTED</div>
        <div class="terminal-text" style="margin-top: 30px;">SECURITY CHALLENGE INITIATED...</div>
        <div class="terminal-text" style="margin-top: 20px;">Professor Falken left a backdoor. Decrypt this message to find the password:</div>
        
        <div class="cipher-text" id="cipher-display">QPTIVB</div>
        
        <div class="terminal-text" style="font-size: 16px; color: var(--grid); margin-top: 20px;">
          HINT: Caesar Cipher - Shift of 7<br>
          HINT: The password is the name of Falken's son
        </div>

        <div class="input-group">
          <span class="input-label">PASSWORD:</span>
          <input type="text" class="game-input" id="password-input" placeholder="ENTER PASSWORD" maxlength="10">
          <button class="submit-btn" onclick="window.checkPassword()">SUBMIT</button>
        </div>

        <div id="level1-feedback"></div>
      </div>
    </div>
  </div>

  <!-- LEVEL 2: WAR DIALER -->
  <div id="level2-screen" class="screen">
    <div class="game-container">
      <div class="game-header">
        <div class="level-title">LEVEL 2: WAR DIALER</div>
        <div class="score-display">
          <div>SCORE: <span id="score2">0</span></div>
        </div>
      </div>
      <div class="game-content">
        <div class="terminal-text">MODEM DETECTED</div>
        <div class="terminal-text">INITIATING AUTOMATED DIALING SEQUENCE...</div>
        <div class="terminal-text" style="margin-top: 20px;">Scanning for NORAD systems. Find the correct connection.</div>
        
        <div class="dialer-display" id="dialer-grid"></div>

        <div class="terminal-text" style="margin-top: 30px; color: var(--warn);">
          HINT: NORAD systems respond with "WOPR" in the carrier signal
        </div>

        <div id="level2-feedback"></div>
      </div>
    </div>
  </div>

  <!-- LEVEL 3: GAMES LIST -->
  <div id="level3-screen" class="screen">
    <div class="game-container">
      <div class="game-header">
        <div class="level-title">LEVEL 3: SHALL WE PLAY A GAME?</div>
        <div class="score-display">
          <div>SCORE: <span id="score3">0</span></div>
        </div>
      </div>
      <div class="game-content">
        <div class="terminal-text" style="font-size: 28px; margin-bottom: 30px;">GREETINGS PROFESSOR FALKEN.</div>
        <div class="terminal-text" style="font-size: 24px; margin-bottom: 40px;">SHALL WE PLAY A GAME?</div>
        
        <div class="games-list">
          <div class="game-option" onclick="window.selectGame('CHESS')">1. CHESS</div>
          <div class="game-option" onclick="window.selectGame('POKER')">2. POKER</div>
          <div class="game-option" onclick="window.selectGame('FIGHTER COMBAT')">3. FIGHTER COMBAT</div>
          <div class="game-option dangerous" onclick="window.selectGame('GLOBAL THERMONUCLEAR WAR')">4. GLOBAL THERMONUCLEAR WAR</div>
          <div class="game-option" onclick="window.selectGame('THEATERWIDE BIOTOXIC AND CHEMICAL WARFARE')">5. THEATERWIDE BIOTOXIC AND CHEMICAL WARFARE</div>
          <div class="game-option" onclick="window.selectGame('BACKGAMMON')">6. BACKGAMMON</div>
        </div>

        <div id="level3-feedback" style="margin-top: 30px;"></div>
      </div>
    </div>
  </div>

  <!-- LEVEL 4: LAUNCH CODES -->
  <div id="level4-screen" class="screen">
    <div class="game-container">
      <div class="game-header">
        <div class="level-title">LEVEL 4: LAUNCH AUTHORIZATION</div>
        <div class="score-display">
          <div>SCORE: <span id="score4">0</span></div>
          <div>CODES: <span id="codes-solved">0</span>/3</div>
        </div>
      </div>
      <div class="game-content">
        <div class="terminal-text">LAUNCH SYSTEM LOCKED</div>
        <div class="terminal-text">AUTHORIZATION CODES REQUIRED</div>
        <div class="terminal-text" style="margin-top: 20px; color: var(--warn);">Solve 3 puzzles to gain missile control</div>

        <div id="puzzle-container"></div>

        <div id="level4-feedback"></div>
      </div>
    </div>
  </div>

  <!-- LEVEL 5: NORAD SCREEN -->
  <div id="norad-screen" class="screen">
    <div id="header">
      <div>W.O.P.R // GLOBAL THERMONUCLEAR WAR</div>
      <div class="controls">
        <span style="margin-right: 20px;">TIME: <span id="game-timer">06:00</span></span>
        CONNECTION: <span id="connection-status">ACTIVE</span>
      </div>
    </div>

    <div id="main-container">
      <section id="terminal-section">
        <div id="term-handle">WOPR CONSOLE</div>
        <div id="terminal-output"></div>
        <div id="input-line">
          <span id="prompt">&gt;</span>
          <input type="text" id="command-input" placeholder="Type HELP for commands" />
          <span class="cursor"></span>
        </div>
      </section>

      <div class="display-section">
        <div class="globe-container">
          <canvas id="globeCanvas"></canvas>
        </div>
        <div class="map-container">
          <canvas id="mapCanvas"></canvas>
        </div>
      </div>
    </div>

    <div id="footer">
      <div>NORAD // CHEYENNE MTN</div>
      <div>
        LAUNCHES: <span id="track-count">0</span> | 
        DEFCON: <span id="defcon">5</span> | 
        SHIELD: <span id="shield-status">OFFLINE</span> | 
        SCORE: <span id="final-score">0</span>
      </div>
      <div>CITIES: <span id="cities-remaining">10/10</span></div>
    </div>
  </div>

  <!-- SDI ACTIVATION POPUP -->
  <div id="sdi-popup" class="popup-overlay" style="display: none;">
    <div class="popup-box">
      <div class="popup-header">âš  SDI DEFENSE SYSTEM</div>
      <div class="popup-body">
        <div class="terminal-text" style="margin-bottom: 20px;">
          STRATEGIC DEFENSE INITIATIVE<br>
          ORBITAL LASER PLATFORM
        </div>
        <div class="terminal-text" style="color: var(--warn); margin-bottom: 20px;">
          COST: 5000 POINTS<br>
          DURATION: 60 SECONDS<br>
          INTERCEPT RATE: 75%
        </div>
        <div class="terminal-text">
          Activate satellite defense system to<br>
          protect USA from incoming missiles?
        </div>
      </div>
      <div class="popup-buttons">
        <button class="popup-btn" onclick="window.confirmSDIActivation()">ACTIVATE</button>
        <button class="popup-btn secondary" onclick="window.closeSDIPopup()">CANCEL</button>
      </div>
    </div>
  </div>

  <!-- TRANSMISSION POPUP CONTAINER -->
  <div id="transmission-container"></div>

  <!-- END SCREEN -->
  <div id="end-screen" class="screen end-screen">
    <div class="end-message">
      A STRANGE GAME.<br>
      THE ONLY WINNING MOVE IS<br>
      NOT TO PLAY.
    </div>
    <div class="final-score">FINAL SCORE: <span id="end-score">0</span></div>
    <div class="terminal-text" style="font-size: 18px; margin-top: 30px;">
      <div>MISSILES LAUNCHED: <span id="end-missiles">0</span></div>
      <div>INTERCEPTIONS: <span id="end-intercepts">0</span></div>
      <div>CITIES DESTROYED: <span id="end-cities">0</span></div>
    </div>
    <div class="terminal-text" style="font-size: 24px; margin-top: 30px;">
      HOW ABOUT A NICE GAME OF CHESS?
    </div>
    <button class="restart-btn" onclick="window.restartGame()">PLAY AGAIN</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="game.js"></script>
</body>
</html>
